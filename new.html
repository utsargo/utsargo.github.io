---
layout: default
title: নতুন পোস্ট
permalink: /add/
---
<form action="https://github.com/utsargo/utsargo.github.io/tree/master/_posts" method="get" onsubmit="determineFilename(this);">
  <input type="hidden" name="filename" value="">
  <div class="form-group">
    <input type="text" name="title" class="form-control" id="titleInput" placeholder="শিরোনাম">
    <input type="text" name="tag" class="form-control" id="tagInput" placeholder="ট্যাগ">
    <span><input type="checkbox" name="publish" value="yes" checked> এখনই প্রকাশ?</span>
  </div>
  <div class="form-group">
    <textarea name="value" id="contentsInput" class="form-control" rows=20 placeholder="লেখা"></textarea>
  </div>
  <button type="submit" class="btn btn-default">পোস্ট</button>
</form>

<script type="text/javascript">
function determineFilename(form) {
  // Find the date and time in the correct formats
  var today = new Date();
  var dd = today.getDate();
  var mm = today.getMonth()+1;//January is 0!`
  var yyyy = today.getFullYear();
  if(dd<10) dd = '0' + dd;
  if(mm<10) mm = '0' + mm;
  var today_nice = yyyy + '-' + mm + '-' + dd;
  var date_time = today_nice + '-' + today.getHours() + '-' + today.getMinutes();
  // Determine the filename
   var post_title = form.title.value;
   var post_tags = form.tag.value;
   var splited_tags = post_tags.split(',').map(Function.prototype.call, String.prototype.trim);
   var prntag = JSON.stringify (splited_tags);
   var willpublish = form.publish.value;
   if (form.publish.checked){
     willpublish = "true"
   } else {
     willpublish = "false"
   }
   var filename = date_time + '-' + post_title.replace(/[ :]/g, '-').toLowerCase().replace (/[-]+/g, '-') + '.markdown';
  form.filename.value = filename;
  // Add the YAML prefix on the content
   form.value.value = "---\npublished: true\nlayout: post\ntitle: \"" + post_title + "\"\ncomments: true\npublished: " + willpublish + "\ntags: " + prntag + "\n---\n\n" + form.value.value;
   form.action = "https://github.com/utsargo/utsargo.github.io/tree/master/_posts" + filename;
}
</script>
